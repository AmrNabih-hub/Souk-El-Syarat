<!DOCTYPE html>
<html>
<head>
    <title>App Loading Test</title>
</head>
<body>
    <h1>Testing Souk El-Sayarat Loading</h1>
    <div id="status">Checking...</div>
    <div id="errors" style="color: red;"></div>
    
    <script>
        async function testApp() {
            const statusEl = document.getElementById('status');
            const errorsEl = document.getElementById('errors');
            
            try {
                // Test 1: Check if site loads
                statusEl.innerHTML += '<br>1. Fetching site...';
                const response = await fetch('https://souk-el-syarat.web.app/');
                if (response.ok) {
                    statusEl.innerHTML += ' ✅ Site loads';
                    const html = await response.text();
                    
                    // Test 2: Check for root element
                    if (html.includes('id="root"')) {
                        statusEl.innerHTML += '<br>2. Root element found ✅';
                    } else {
                        errorsEl.innerHTML += '<br>ERROR: No root element';
                    }
                    
                    // Test 3: Check for script
                    if (html.includes('/assets/index-')) {
                        statusEl.innerHTML += '<br>3. JavaScript bundle found ✅';
                    } else {
                        errorsEl.innerHTML += '<br>ERROR: No JavaScript bundle';
                    }
                    
                    // Test 4: Check script loading
                    const scriptMatch = html.match(/src="(\/assets\/index-[^"]+\.js)"/);
                    if (scriptMatch) {
                        statusEl.innerHTML += '<br>4. Testing script load...';
                        const scriptResponse = await fetch('https://souk-el-syarat.web.app' + scriptMatch[1]);
                        if (scriptResponse.ok) {
                            statusEl.innerHTML += ' ✅ Script loads';
                            const scriptContent = await scriptResponse.text();
                            if (scriptContent.length > 1000) {
                                statusEl.innerHTML += '<br>5. Script size: ' + (scriptContent.length / 1024).toFixed(2) + 'KB ✅';
                            }
                        } else {
                            errorsEl.innerHTML += '<br>ERROR: Script fails to load';
                        }
                    }
                } else {
                    errorsEl.innerHTML = 'Site returns error: ' + response.status;
                }
            } catch (error) {
                errorsEl.innerHTML = 'Error: ' + error.message;
            }
        }
        
        testApp();
    </script>
</body>
</html>