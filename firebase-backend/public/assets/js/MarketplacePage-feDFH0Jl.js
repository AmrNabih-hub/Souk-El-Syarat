var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,n=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&i(e,t,a[t]);if(r)for(var t of r(a))l.call(a,t)&&i(e,t,a[t]);return e},c=(e,r)=>a(e,t(r)),o=(e,a)=>{var t={};for(var i in e)s.call(e,i)&&a.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&r)for(var i of r(e))a.indexOf(i)<0&&l.call(e,i)&&(t[i]=e[i]);return t};import{a as d,j as m,d as x}from"./index-BcRxZzHF.js";import{r as u}from"./react-vendor-Dd_kQiD4.js";import{P as p}from"./product.service-BpTMTcSN.js";import{P as h}from"./ProductCard-ByvZvT9M.js";import{E as g}from"./LoadingSpinner-DopjEbfj.js";import{F as v}from"./FunnelIcon-Bon-va4c.js";import{A as j,m as f}from"./ui-vendor-BBNIAXd4.js";import"./firebase-vendor-BCleZyoM.js";import"./CustomIcons-DM4YvvRG.js";import"./StarIcon-Bsyjj-I4.js";import"./EyeIcon-ySdkiqHN.js";import"./CheckBadgeIcon-CtGb0htM.js";import"./TruckIcon-fIGukBsm.js";function b(e,a){var t=e,{title:r,titleId:s}=t,l=o(t,["title","titleId"]);return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},l),r?u.createElement("title",{id:s},r):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const y=u.forwardRef(b);function N(e,a){var t=e,{title:r,titleId:s}=t,l=o(t,["title","titleId"]);return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},l),r?u.createElement("title",{id:s},r):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))}const w=u.forwardRef(N),k=()=>{var e,a;const{language:t,addToCart:r,addToFavorites:s,removeFromFavorites:l}=d(),[i,o]=u.useState([]),[b,N]=u.useState([]),[k,C]=u.useState(!0),[S,P]=u.useState(""),[A,M]=u.useState(!1),[I,R]=u.useState("grid"),[L,O]=u.useState("newest"),[E,T]=u.useState({query:"",category:void 0,condition:void 0,priceRange:void 0,inStock:!0});u.useEffect(()=>{Z()},[]),u.useEffect(()=>{H()},[i,E,L,S]);const Z=()=>{return e=function*(){try{C(!0);const e=p.getSampleProducts(),a=[...e,c(n({},e[0]),{id:"car-2",title:"BMW X5 2019 - فل أوبشن",description:"BMW X5 2019 بحالة ممتازة، فل أوبشن، جلد، فتحة سقف، نافيجيشن.",price:85e4,originalPrice:95e4,images:[{id:"car-2-img-1",url:"https://images.unsplash.com/photo-1555215695-3004980ad54e?w=800&h=600&fit=crop",alt:"BMW X5 2019",isPrimary:!0,order:0}],views:189,favorites:24,features:["فتحة سقف","جلد","نافيجيشن","كاميرات محيطة"]})];o(a)}catch(e){}finally{C(!1)}},new Promise((a,t)=>{var r=a=>{try{l(e.next(a))}catch(r){t(r)}},s=a=>{try{l(e.throw(a))}catch(r){t(r)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,s);l((e=e.apply(null,null)).next())});var e},H=()=>{let e=[...i];if(S.trim()){const a=S.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(a)||e.description.toLowerCase().includes(a)||e.tags.some(e=>e.toLowerCase().includes(a)))}switch(E.category&&(e=e.filter(e=>e.category===E.category)),E.condition&&(e=e.filter(e=>e.condition===E.condition)),E.priceRange&&(e=e.filter(e=>e.price>=E.priceRange.min&&e.price<=E.priceRange.max)),null!==E.inStock&&(e=e.filter(e=>e.inStock===E.inStock)),L){case"price_low":e.sort((e,a)=>e.price-a.price);case"price_high":e.sort((e,a)=>a.price-e.price);case"popular":e.sort((e,a)=>a.views-e.views);default:e.sort((e,a)=>new Date(a.createdAt).getTime()-new Date(e.createdAt).getTime())}N(e)},F=(e,a)=>{T(t=>c(n({},t),{[e]:a}))},B=()=>{T({query:"",category:void 0,condition:void 0,priceRange:void 0,inStock:!0}),P("")},V=(e,a)=>{r({productId:e,quantity:a})},W=(e,a)=>{a?s(e):l(e)};return k?m.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[m.jsx("div",{className:"bg-white border-b border-neutral-200",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:m.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-neutral-900",children:"ar"===t?"السوق":"Marketplace"}),m.jsx("p",{className:"text-neutral-600 mt-1",children:"ar"===t?"جاري تحميل المنتجات...":"Loading products..."})]})})})}),m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:m.jsx("div",{className:"flex justify-center items-center py-20",children:m.jsx(g,{size:"lg",text:"ar"===t?"جاري التحميل...":"Loading..."})})})]}):m.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[m.jsx("div",{className:"bg-white border-b border-neutral-200",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:m.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-neutral-900",children:"ar"===t?"السوق":"Marketplace"}),m.jsx("p",{className:"text-neutral-600 mt-1",children:"ar"===t?`${b.length} منتج متاح`:`${b.length} products available`})]}),m.jsx("form",{onSubmit:e=>{e.preventDefault(),H()},className:"flex-1 max-w-md",children:m.jsxs("div",{className:"relative",children:[m.jsx(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-neutral-400"}),m.jsx("input",{type:"text",value:S,onChange:e=>P(e.target.value),placeholder:"ar"===t?"البحث في المنتجات...":"Search products...",className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})})]})})}),m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:m.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[m.jsx("div",{className:"lg:w-64 flex-shrink-0",children:m.jsxs("div",{className:"sticky top-4",children:[m.jsx("div",{className:"lg:hidden mb-4",children:m.jsxs("button",{onClick:()=>M(!A),className:"w-full flex items-center justify-center px-4 py-2 border border-neutral-300 rounded-lg bg-white hover:bg-neutral-50 transition-colors",children:[m.jsx(v,{className:"w-5 h-5 mr-2"}),"ar"===t?"الفلاتر":"Filters"]})}),m.jsx(j,{children:(A||"undefined"!=typeof window&&window.innerWidth>=1024)&&m.jsxs(f.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white rounded-lg border border-neutral-200 p-6 space-y-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:"ar"===t?"الفلاتر":"Filters"}),m.jsx("button",{onClick:B,className:"text-sm text-primary-600 hover:text-primary-700",children:"ar"===t?"مسح الكل":"Clear All"})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-neutral-900 mb-3",children:"ar"===t?"الفئة":"Category"}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("label",{className:"flex items-center",children:[m.jsx("input",{type:"radio",name:"category",checked:!E.category,onChange:()=>F("category",void 0),className:"mr-2"}),m.jsx("span",{className:"text-sm text-neutral-700",children:"ar"===t?"الكل":"All"})]}),[{value:"cars",label:{ar:"سيارات",en:"Cars"}},{value:"parts",label:{ar:"قطع غيار",en:"Parts"}},{value:"accessories",label:{ar:"إكسسوارات",en:"Accessories"}},{value:"services",label:{ar:"خدمات",en:"Services"}},{value:"tools",label:{ar:"أدوات",en:"Tools"}},{value:"tires",label:{ar:"إطارات",en:"Tires"}}].map(e=>m.jsxs("label",{className:"flex items-center",children:[m.jsx("input",{type:"radio",name:"category",checked:E.category===e.value,onChange:()=>F("category",e.value),className:"mr-2"}),m.jsx("span",{className:"text-sm text-neutral-700",children:e.label[t]})]},e.value))]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-neutral-900 mb-3",children:"ar"===t?"الحالة":"Condition"}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("label",{className:"flex items-center",children:[m.jsx("input",{type:"radio",name:"condition",checked:!E.condition,onChange:()=>F("condition",void 0),className:"mr-2"}),m.jsx("span",{className:"text-sm text-neutral-700",children:"ar"===t?"الكل":"All"})]}),[{value:"new",label:{ar:"جديد",en:"New"}},{value:"used",label:{ar:"مستعمل",en:"Used"}},{value:"refurbished",label:{ar:"مجدد",en:"Refurbished"}}].map(e=>m.jsxs("label",{className:"flex items-center",children:[m.jsx("input",{type:"radio",name:"condition",checked:E.condition===e.value,onChange:()=>F("condition",e.value),className:"mr-2"}),m.jsx("span",{className:"text-sm text-neutral-700",children:e.label[t]})]},e.value))]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-neutral-900 mb-3",children:"ar"===t?"نطاق السعر":"Price Range"}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsx("input",{type:"number",placeholder:"ar"===t?"من":"Min",value:(null==(e=E.priceRange)?void 0:e.min)||"",onChange:e=>F("priceRange",c(n({},E.priceRange),{min:parseInt(e.target.value)||0})),className:"input text-sm"}),m.jsx("input",{type:"number",placeholder:"ar"===t?"إلى":"Max",value:(null==(a=E.priceRange)?void 0:a.max)||"",onChange:e=>F("priceRange",c(n({},E.priceRange),{max:parseInt(e.target.value)||999999})),className:"input text-sm"})]})]}),m.jsx("div",{children:m.jsxs("label",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",checked:E.inStock,onChange:e=>F("inStock",e.target.checked),className:"mr-2"}),m.jsx("span",{className:"text-sm text-neutral-700",children:"ar"===t?"متوفر فقط":"In stock only"})]})})]})})]})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx("span",{className:"text-sm text-neutral-600",children:"ar"===t?"ترتيب حسب:":"Sort by:"}),m.jsxs("select",{value:L,onChange:e=>O(e.target.value),className:"input text-sm",children:[m.jsx("option",{value:"newest",children:"ar"===t?"الأحدث":"Newest"}),m.jsx("option",{value:"popular",children:"ar"===t?"الأكثر شعبية":"Most Popular"}),m.jsx("option",{value:"price_low",children:"ar"===t?"السعر: من الأقل للأعلى":"Price: Low to High"}),m.jsx("option",{value:"price_high",children:"ar"===t?"السعر: من الأعلى للأقل":"Price: High to Low"})]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("button",{onClick:()=>R("grid"),className:"p-2 rounded-lg "+("grid"===I?"bg-primary-100 text-primary-600":"text-neutral-400 hover:text-neutral-600"),children:m.jsx(w,{className:"w-5 h-5"})}),m.jsx("button",{onClick:()=>R("list"),className:"p-2 rounded-lg "+("list"===I?"bg-primary-100 text-primary-600":"text-neutral-400 hover:text-neutral-600"),children:m.jsx(y,{className:"w-5 h-5"})})]})]}),b.length>0?m.jsx(f.div,{className:"grid gap-6 "+("grid"===I?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"),layout:!0,children:m.jsx(j,{children:b.map(e=>m.jsx(f.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},children:m.jsx(h,{product:e,onAddToCart:V,onToggleFavorite:W})},e.id))})}):m.jsxs(f.div,{className:"text-center py-20",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[m.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),m.jsx("h3",{className:"text-xl font-semibold text-neutral-900 mb-2",children:"ar"===t?"لم يتم العثور على منتجات":"No products found"}),m.jsx("p",{className:"text-neutral-600 mb-6",children:"ar"===t?"جرب تعديل معايير البحث أو الفلاتر":"Try adjusting your search criteria or filters"}),m.jsx("button",{onClick:B,className:"btn btn-primary",children:"ar"===t?"مسح جميع الفلاتر":"Clear all filters"})]})]})]})})]})};export{k as default};
